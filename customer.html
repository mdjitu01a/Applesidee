<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>অ্যাপল সাইড</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        body { font-family: Arial, sans-serif; margin:0; background:#f8f9fa; }
        header {
            background: #1e88e5;
            color: white;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        }
        .logo img { height: 48px; border-radius: 8px; }
        .search-box { flex: 1; margin: 0 15px; max-width: 500px; }
        .search-box input { width: 100%; padding: 10px 16px; border-radius: 30px; border: none; font-size: 16px; }
        .cart-icon { font-size: 1.6rem; position: relative; cursor: pointer; }
        .cart-count {
            position: absolute;
            top: -8px;
            right: -12px;
            background: #e53935;
            color: white;
            font-size: 12px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
            padding: 16px;
        }
        .product-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }
        .product-img {
            width: 100%;
            height: 180px;
            object-fit: contain;
            padding: 12px;
            background: #f9f9f9;
        }
        .card-body { padding: 10px; }
        .price { font-size: 1.3rem; color: #e53935; font-weight: bold; }
        .old-price { text-decoration: line-through; color: #777; font-size: 0.95rem; }
        .buy-btn {
            background: #25D366;
            color: white;
            border: none;
            padding: 10px;
            width: 90%;
            border-radius: 6px;
            margin: 8px auto;
            display: block;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<body>

<header>
    <div class="logo">
        <img src="https://raw.githubusercontent.com/mdjitu01a/appleside/main/IMG_1260.jpeg" alt="অ্যাপল সাইড">
    </div>
    <div class="search-box">
        <input type="text" id="search" placeholder="প্রোডাক্ট খুঁজুন...">
    </div>
    <div class="cart-icon" id="cartBtn">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cartCount">0</span>
    </div>
</header>

<div class="product-grid" id="productGrid"></div>

<script>
    const API_URL = "https://script.google.com/macros/s/AKfycbwK2QXSp1i-s8cD5hEVp_0ONKzCbSyZxr2NEzobJlHdzlmxDN97a32sh1ADJgyqa-kW/exec";

    let products = [];

    async function loadProducts() {
        try {
            const res = await fetch(API_URL);
            if (!res.ok) throw new Error("Network response was not ok");
            products = await res.json();
            renderProducts(products);
        } catch (err) {
            console.error(err);
            document.getElementById("productGrid").innerHTML = "<p style='text-align:center; color:red; padding:40px;'>প্রোডাক্ট লোড করতে সমস্যা হয়েছে। ইন্টারনেট চেক করুন।</p>";
        }
    }

    function renderProducts(list) {
        const grid = document.getElementById("productGrid");
        grid.innerHTML = "";
        if (list.length === 0) {
            grid.innerHTML = "<p style='text-align:center; padding:40px;'>কোনো প্রোডাক্ট পাওয়া যায়নি</p>";
            return;
        }
        list.forEach(p => {
            const card = document.createElement("div");
            card.className = "product-card";
            card.innerHTML = `
                <img src="${p.img || 'https://via.placeholder.com/200?text=No+Image'}" class="product-img" alt="${p.name}">
                <div class="card-body">
                    <h3>${p.name}</h3>
                    <div class="price">৳${p.price}</div>
                    ${p.old ? `<div class="old-price">৳${p.old}</div>` : ''}
                    <button class="buy-btn">কিনুন</button>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    // সার্চ
    document.getElementById("search").addEventListener("input", e => {
        const term = e.target.value.toLowerCase().trim();
        const filtered = products.filter(p => p.name.toLowerCase().includes(term));
        renderProducts(filtered);
    });

    loadProducts();
</script>
</body>
</html>
